<section id="<%= dom_id(card, :card_container) %>"
    class="card-perma <%= "card-perma--pointing" unless card.published? %>" style="--card-color: <%= card.color %>;">
  <%= render "cards/container/engagement", card: card %>

  <aside class="card-perma__actions card-perma__actions--left" role="toolbar">
    <%= render "cards/container/gild", card: card if card.doing? %>
    <%= render "cards/container/image", card: card %>

    <%= button_to collection_card_path(card.collection, card),
          method: :delete, class: "btn", data: { turbo_confirm: "Are you sure you want to delete this?" } do %>
      <%= icon_tag "trash" %> <span class="for-screen-reader">Delete</span>
    <% end %>
  </aside>

  <div class="card-perma__bg">
    <%= render "cards/display/perma", card: card %>
  </div>

  <% if card.published? %>
    <%# FIXME: Let's move this aside outside of the card container section so these frames don't reload/flicker when card is replaced %>
    <aside class="card-perma__actions card-perma__actions--right" role="toolbar">
      <%= turbo_frame_tag card, :watch, src: card_watch_path(card) %>
      <%= turbo_frame_tag card, :pin, src: card_pin_path(card) %>
    </aside>

    <%= render "cards/container/closure", card: card %>
  <% end %>
</section>
